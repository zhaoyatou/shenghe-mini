{"version":3,"sources":["uni-app:///main.js","webpack:////Users/soindy/Documents/ShengHe/code/shenghe_car_mini/pages/createInsurance/headsblock.vue?c493","webpack:////Users/soindy/Documents/ShengHe/code/shenghe_car_mini/pages/createInsurance/headsblock.vue?cd58","webpack:////Users/soindy/Documents/ShengHe/code/shenghe_car_mini/pages/createInsurance/headsblock.vue?5daf","webpack:////Users/soindy/Documents/ShengHe/code/shenghe_car_mini/pages/createInsurance/headsblock.vue?1f8d","uni-app:///pages/createInsurance/headsblock.vue","webpack:////Users/soindy/Documents/ShengHe/code/shenghe_car_mini/pages/createInsurance/headsblock.vue?1528","webpack:////Users/soindy/Documents/ShengHe/code/shenghe_car_mini/pages/createInsurance/headsblock.vue?161b"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","data","signImage","isEnd","onShow","uni","success","canvasw","canvash","methods","overSign","canvasId","url","filePath","name","header","resolve","app","delta","title","icon","duration","mask","start","x","y","touchs","move","end","console","cancel","tap","error","draw","content","clearClick","onLoad","_that"],"mappings":";;;;;;;;;;;;;AAAA;AAGA;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,mBAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAmI;AACnI;AAC8D;AACL;AACqC;;;AAG9F;AACmN;AACnN,gBAAgB,iNAAU;AAC1B,EAAE,gFAAM;AACR,EAAE,iGAAM;AACR,EAAE,0GAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,qGAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACRA;AAAA;AAAA;AAAA;AAAu1B,CAAgB,wyBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACiB32B;AACA;AACA;AACA;AACA;AACA;AAAA,eACA;EACAC;IACA;MACAC;MACAC;IACA;EACA;EACAC;IACA;IACA;IACA;IACAC;MACAC;QACAC;QACAC;MACA;IACA;EACA;EACAC;IACAC;MACA;MACA;QACAL;UACAM;UAEAL;YACA;YACA;cACAD;gBACAO;gBACAC;gBACAC;gBACAC;kBACA;gBACA;gBACAT;kBACAU;gBACA;cACA;YACA;cACAC;cACAZ;gBACAa;cACA;YACA;UACA;QACA;MACA;QACAb;UACAc;UACAC;UACAC;UACAC;QACA;MACA;IAEA;IAEA;IACAC;MACA;MACA;MACA;MACA;MACA;QACAC;QACAC;MACA;MACA;MACAC;IAEA;IACA;IACAC;MACA;QACAH;QACAC;MACA;MACA;MACAC;MACA;QACA;MACA;IACA;IAEA;IACAE;MACAC;MACA;MACA;MACA;MACA;QACAH;MACA;IAEA;IAEA;IACAI;MACAD;IACA;IAEA;IACAE;MACAF;IACA;IAEAG;MACAH;IACA;IAEA;IACAI;MACA;MACA;MACA;MACAP;MACAQ;MACAA;MACAA;MACAA;IACA;IACA;IACAC;MACA;MACA;MACA;MACAD;MACAA;IACA;EACA;EACA;AACA;AACA;EACAE;IACAC;IACA;IACAH;IACA;IACAA;IACA;IACAA;IACA;IACAA;IACA;IACAA;EACA;AAEA;AAAA,2B;;;;;;;;;;;;;AC3KA;AAAA;AAAA;AAAA;AAAkuC,CAAgB,6nCAAG,EAAC,C;;;;;;;;;;;ACAtvC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/createInsurance/headsblock.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/createInsurance/headsblock.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./headsblock.vue?vue&type=template&id=3c481df8&scoped=true&\"\nvar renderjs\nimport script from \"./headsblock.vue?vue&type=script&lang=js&\"\nexport * from \"./headsblock.vue?vue&type=script&lang=js&\"\nimport style0 from \"./headsblock.vue?vue&type=style&index=0&id=3c481df8&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3c481df8\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/createInsurance/headsblock.vue\"\nexport default component.exports","export * from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./headsblock.vue?vue&type=template&id=3c481df8&scoped=true&\"","var components\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./headsblock.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./headsblock.vue?vue&type=script&lang=js&\"","<template>\n    <view class='contents'>\n        <canvas class='firstCanvas' canvas-id=\"firstCanvas\" @touchmove='move' @touchstart='start($event)' @touchend='end'\n         @touchcancel='cancel' @longtap='tap' disable-scroll='true' @error='error'>\n        </canvas>\n        <view class=\"caozuo\">\n            <view class=\"chongqian\" @tap='clearClick'>\n                重签\n            </view>\n            <view class=\"over\" @tap=\"overSign\">\n                完成签名\n            </view>\n        </view>\n    </view>\n</template>\n\n<script>\n\tlet app = getApp()\n    var content = null;\n    var touchs = [];\n    var canvasw = 0;\n    var canvash = 0;\n    var _that;\n    export default {\n        data() {\n            return {\n                signImage: '',\n                isEnd: false // 是否签名\n            }\n        },\n\t\tonShow() {\n\t\t\t// 查看是否还存在token\n\t\t\tthis.$API.goLogin()\n\t\t\t//获取系统信息\n\t\t\tuni.getSystemInfo({\n\t\t\t\tsuccess: function(res) {\n\t\t\t\t\tcanvasw = res.windowWidth;\n\t\t\t\t\tcanvash = res.windowHeight;\n\t\t\t\t},\n\t\t\t})\n\t\t},\n        methods: {\n            overSign: function() {\n\t\t\t\tlet that = this\n                if (this.isEnd) {\n                    uni.canvasToTempFilePath({\n                        canvasId: 'firstCanvas',\n\n                        success: function(res) {\n                            //打印图片路径\n\t\t\t\t\t\t\tnew Promise((resolve, reject) => {\n\t\t\t\t\t\t\t\tuni.uploadFile({\n\t\t\t\t\t\t\t\t\turl: uni.getStorageSync('SYSTEMURL') + '/oss/uploadFile',\n\t\t\t\t\t\t\t\t\tfilePath: res.tempFilePath,\n\t\t\t\t\t\t\t\t\tname: 'file',\n\t\t\t\t\t\t\t\t\theader: {\n\t\t\t\t\t\t\t\t\t\t\"token\": uni.getStorageSync('token'),\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\tsuccess: (rea) => {\n\t\t\t\t\t\t\t\t\t\tresolve(JSON.parse(rea.data))\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}).then(rec => {\n\t\t\t\t\t\t\t\tapp.globalData.userHeadsName = rec.data.fileUrl\n\t\t\t\t\t\t\t\tuni.navigateBack({\n\t\t\t\t\t\t\t\t\tdelta: 1\n\t\t\t\t\t\t\t\t}) \n\t\t\t\t\t\t\t})\n                        }\n                    })\n                } else {\n                    uni.showToast({\n                        title: '请先完成签名',\n                        icon: \"none\",\n                        duration: 1500,\n                        mask: true\n                    })\n                }\n\n            },\n\n            // 画布的触摸移动开始手势响应\n            start: function(event) {\n                // // console.log(event)\n                // console.log(\"触摸开始\" + event.changedTouches[0].x)\n                // console.log(\"触摸开始\" + event.changedTouches[0].y)\n                //获取触摸开始的 x,y\n                let point = {\n                    x: event.changedTouches[0].x,\n                    y: event.changedTouches[0].y\n                }\n                // console.log(point)\n                touchs.push(point);\n\n            },\n            // 画布的触摸移动手势响应\n            move: function(e) {\n                let point = {\n                    x: e.touches[0].x,\n                    y: e.touches[0].y\n                }\n                // console.log(point)\n                touchs.push(point)\n                if (touchs.length >= 2) {\n                    this.draw(touchs)\n                }\n            },\n\n            // 画布的触摸移动结束手势响应\n            end: function(e) {\n                console.log(\"触摸结束\" + e)\n                // 设置为已经签名\n                this.isEnd = true\n                // 清空轨迹数组\n                for (let i = 0; i < touchs.length; i++) {\n                    touchs.pop()\n                }\n\n            },\n\n            // 画布的触摸取消响应\n            cancel: function(e) {\n                console.log(\"触摸取消\" + e)\n            },\n\n            // 画布的长按手势响应\n            tap: function(e) {\n                console.log(\"长按手势\" + e)\n            },\n\n            error: function(e) {\n                console.log(\"画布触摸错误\" + e)\n            },\n\n            //绘制\n            draw: function(touchs) {\n                // console.log(touchs[0],touchs[1])\n                let point1 = touchs[0]\n                let point2 = touchs[1]\n                touchs.shift()\n                content.moveTo(point1.x, point1.y)\n                content.lineTo(point2.x, point2.y)\n                content.stroke()\n                content.draw(true)\n            },\n            //清除操作\n            clearClick: function() {\n                // 设置为未签名\n                this.isEnd = false\n                //清除画布\n                content.clearRect(0, 0, canvasw, canvash)\n                content.draw(true)\n            },\n        },\n        /**\n         * 生命周期函数--监听页面加载\n         */\n        onLoad: function(options) {\n            _that = this\n            //获得Canvas的上下文\n            content = uni.createCanvasContext('firstCanvas')\n            //设置线的颜色\n            content.setStrokeStyle(\"#000\")\n            //设置线的宽度\n            content.setLineWidth(5)\n            //设置线两端端点样式更加圆润\n            content.setLineCap('round')\n            //设置两条线连接处更加圆润\n            content.setLineJoin('round')\n        },\n\n    }\n</script>\n\n<style scoped>\n    .ts {\n        color: #FF485D;\n        font-size: 30rpx;\n        height: 150rpx;\n        line-height: 150rpx;\n        padding-left: 20rpx;\n    }\n\n    canvas {\n        background-color: #DDDDDD;\n        width: 700rpx;\n        margin: 0 25rpx;\n        height: calc(100vh - 90rpx);\n\t\t\n    }\n\n    .contents {\n        padding-top: 20rpx;\n        padding-bottom: 70rpx;\n        box-sizing: border-box;\n\t\t\n    }\n\n    #signatureImg {\n        background-color: #EEEEEE;\n    }\n\n    .caozuo {\n        display: flex;\n        height: 50rpx;\n        width: 750rpx;\n        position: fixed;\n        left: 0;\n        bottom: 0;\n\t\tpadding-bottom: constant(safe-area-inset-bottom);\n\t\tpadding-bottom: env(safe-area-inset-bottom);\n    }\n\n    .caozuo view {\n        width: 375rpx;\n        text-align: center;\n        height: 50rpx;\n        line-height: 50rpx;\n        color: #FFFFFF;\n    }\n\n    .caozuo view:active {\n        background-color: #CCCCCC;\n        color: #333333;\n    }\n\n    .chongqian {\n        background-color: #FF8F58;\n    }\n\n    .over {\n        background-color: #0599D7;\n    }\n</style>","import mod from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./headsblock.vue?vue&type=style&index=0&id=3c481df8&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./headsblock.vue?vue&type=style&index=0&id=3c481df8&scoped=true&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1722433453819\n      var cssReload = require(\"/Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"/\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}